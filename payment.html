<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Complete Payment • Gauri Creations</title>

<link rel="icon" href="favicon.ico">
<link rel="apple-touch-icon" href="favicon.ico">

<style>
/* UI UNCHANGED */
:root{--accent-grad:linear-gradient(135deg,#2563eb,#ec4899);--success-grad:linear-gradient(90deg,#22c55e,#4ade80)}
body{margin:0;padding:20px;min-height:100vh;font-family:Poppins,sans-serif;background:linear-gradient(135deg,#86e1ff,#ffd4b8);display:flex;justify-content:center;align-items:center}
.card{width:100%;max-width:480px;background:#ffffffee;border-radius:22px;padding:22px 20px;box-shadow:0 12px 30px rgba(0,0,0,.25)}
.logo{width:80px;height:80px;border-radius:18px}
.summary{padding:14px;border-radius:16px;background:#fff;border:1px solid #ddd;margin:12px 0 20px}
.summary-row{display:flex;justify-content:space-between}
.confirm-btn{margin-top:14px;width:100%;padding:12px;background:var(--accent-grad);border-radius:999px;color:#fff;border:none}
.slider-shell{margin-top:18px;display:none;text-align:center}
.glass-track{width:80%;height:50px;margin:0 auto;border-radius:999px;background:#fff;border:1px solid #ddd;display:none;position:relative}
.glass-track.visible{display:block}
.glass-track.success{background:var(--success-grad)}
.glass-thumb{width:44px;height:44px;border-radius:999px;background:var(--accent-grad);color:#fff;font-size:22px;position:absolute;top:3px;left:3px;display:flex;justify-content:center;align-items:center;animation:move 1.5s infinite}
@keyframes move{50%{transform:translateX(calc(100% - 48px))}}
</style>
</head>

<body>

<div class="card">
<img src="logo-gauri.jpeg" class="logo">

<div class="summary">
  <div class="summary-row"><span>Order ID</span><strong id="oid"></strong></div>
</div>

<button id="confirmButton" class="confirm-btn">I completed the payment</button>

<div class="slider-shell" id="waitArea">
  <div id="sliderLabel">Checking payment…</div>
  <div class="glass-track" id="glassTrack">
    <div class="glass-thumb">›</div>
  </div>
</div>
</div>

<script>
const SCRIPT_URL="https://script.google.com/macros/s/AKfycbwhyOU_ee33OYs_jowKaqvspE5ejvXhF6uJYa2l5C_Y9Fs7-zJ31P4arUh796000SCC/exec";
const orderId=new URLSearchParams(location.search).get("orderId");
oid.textContent=orderId;

let poll;

function check(){
  fetch(`${SCRIPT_URL}?action=checkPayment&orderId=${orderId}`)
  .then(r=>r.json()).then(d=>{
    if(d.success && d.paymentStatus==="Paid"){
      clearInterval(poll);
      glassTrack.classList.add("success");
      sliderLabel.textContent="Payment Confirmed!";
      setTimeout(()=>location.href=`confirmation.html?orderId=${orderId}`,1200);
    }
  });
}

confirmButton.onclick=()=>{
  waitArea.style.display="block";
  glassTrack.classList.add("visible");
  check();
  poll=setInterval(check,4000);
};
</script>

</body>
</html>
